{% block element_sidebar_filter %}
    {% if block.facets.count > 0 %}
        <div class="cms-element-sidebar-filter">
            {% block element_product_listing_filter_button %}
                <button class="btn header-actions-btn filter-panel-wrapper-toggle"
                        type="button"
                        data-offcanvas-filter="true"
                        aria-haspopup="true"
                        aria-expanded="false"
                        aria-label="{{ "general.menuLink"|trans }}">
                    {% block element_product_listing_filter_button_icon %}
                        {% sw_icon 'sliders-horizontal' %}
                    {% endblock %}
                    {{ "listing.filterTitleText"|trans }}
                </button>
            {% endblock %}

            {% block element_sidebar_filter_panel %}
                <div id="filter-panel-wrapper"
                     class="filter-panel-wrapper"
                     data-offcanvas-filter-content="true">
                    {% block component_filter_panel %}
                        {% set sidebar = block.section == 'sidebar' %}

                        {% block component_filter_panel_header %}
                            <div class="filter-panel-offcanvas-header">
                                <h3 class="filter-panel-offcanvas-only">{{ "listing.filterTitleText"|trans }}</h3>

                                <div class="filter-panel-offcanvas-only filter-panel-offcanvas-close js-offcanvas-close">
                                    {% sw_icon 'x' style { 'size': 'md' } %}
                                </div>
                            </div>
                        {% endblock %}

                        {# @var listing \Shopware\Core\Framework\DataAbstractionLayer\Search\EntitySearchResult #}
                        {% block component_filter_panel_element %}
                            <div class="filter-panel{% if sidebar %} is--sidebar{% endif %}">
                                {% block component_filter_panel_items_container %}
                                    <div class="filter-panel-items-container">

                                        {% for facet in block.facets %}
                                            {% block component_filter_panel_item_properties %}
                                                {% sw_include '@BoxalinoIntelligenceIntegration/storefront/narrative/component/listing/filter/filter-' + facet.visualisation + '.html.twig' with {
                                                    facet: facet,
                                                    sidebar: sidebar,
                                                    name: facet.field,
                                                    displayName: facet.label
                                                } %}
                                            {% endblock %}
                                        {% endfor %}
                                    </div>
                                {% endblock %}

                                {% block component_filter_panel_active_container %}
                                    <div class="filter-panel-active-container">
                                        {% block component_filter_panel_active_container_inner %}{% endblock %}
                                    </div>
                                {% endblock %}
                            </div>
                        {% endblock %}
                    {% endblock %}
                </div>
            {% endblock %}
        </div>
    {% endif %}
{% endblock %}
